_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[14],{"5xsU":function(e,t,n){"use strict";n.r(t);var a=n("1OyB"),r=n("vuIU"),l=n("Ji7U"),s=n("md7G"),u=n("foSv"),c=n("q1tI"),o=n.n(c),i=n("8Kt/"),d=n.n(i),m=n("EfCc"),f=n("ZHqB"),h=n("pI11"),p=n("YFqc"),v=n.n(p),y=n("oKQX"),g=n("wd/R"),b=n.n(g),N=n("/MKj"),_=n("nOHt"),w=n.n(_),k=o.a.createElement;function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.a)(e);if(t){var r=Object(u.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.a)(this,n)}}var S=function(e){Object(l.a)(n,e);var t=O(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={isError:!1,message:null,orders:[]},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.verifyAuth()}},{key:"verifyAuth",value:function(){if(!y.a.customer.isLoggedIn())return w.a.push("/");this.getOrders()}},{key:"formatDate",value:function(e,t){var n=b.a.unix(e);return n.isValid?n.format("MMM Do Y"):null}},{key:"customerSince",value:function(){return null===this.formatDate(this.props.customer.created)?null:k("small",null,k("strong",null,"Customer since:")," ",this.formatDate(this.props.customer.created))}},{key:"getOrders",value:function(){var e=this;return y.a.customer.getOrders().then((function(t){e.setState({isError:!1,orders:t.data})})).catch((function(t){e.setState({isError:!0,message:["Opps, looks like an error occurred!"]})}))}},{key:"getFulfillmentStatus",value:function(e){return e&&"fulfilled"===e?k("span",{className:"badge badge-primary"},"Fullfilled"):k("span",{className:"badge badge-secondary"},"Processing")}},{key:"getPaymentStatus",value:function(e){return e?"not-paid"===e?k("span",{className:"badge badge-warning"},"Not paid"):"paid"===e?k("span",{className:"badge badge-success"},"Paid"):"refunded"===e?k("span",{className:"badge badge-danger"},"Refunded"):k("span",{className:"badge badge-secondary"},"Pending"):k("span",{className:"badge badge-secondary"},"Pending")}},{key:"renderShippingAddress",value:function(){var e=this.state.orders;if(!e||!e.length)return k("div",null,"You havent placed an order yet!");var t=this.state.orders.data[0].shipping;return t?k("div",null,k("div",null,t.name),k("div",null,t.street),k("div",null,t.town_city,t.town_city&&t.county_state?",":""," ",t.county_state),k("div",null,t.country,t.country&&t.postal_zip_code?",":""," ",t.postal_zip_code)):null}},{key:"renderOrdersTable",value:function(){var e=this,t=this.state.orders;return!t||t.length?k("div",{className:"card text-center p-2"},k("p",null,"You haven't placed any orders yet!")):k("table",{className:"table table-bordered"},k("thead",null,k("tr",null,k("th",null,"Order"),k("th",null,"Payment"),k("th",null,"Fulfillment"),k("th",null,"Total"),k("th",null,"Actions"))),k("tbody",null,(0!==this.state.orders.length?this.state.orders.data:[]).map((function(t){return k("tr",{key:t.id},k("td",null,k("div",null,k(v.a,{href:"account/".concat(t.id)},k("a",null,"#",t.customer_reference))),k("small",{className:"text-muted"},e.formatDate(t.created))),k("td",null,e.getPaymentStatus(t.status_payment)),k("td",null,e.getFulfillmentStatus(t.status_fulfillment)),k("td",null,t.order_value.formatted_with_symbol),k("td",null,k(v.a,{href:"account/".concat(t.id)},k("a",null,"View order"))))}))))}},{key:"renderAlert",value:function(){var e=this.state,t=e.isError,n=e.message;if(!n)return null;var a=1===n.length?n[0]:k("ul",{className:"text-left m-0"},n.map((function(e){return k("li",{key:e},e)})));return k("div",{className:"alert ".concat(t?"alert-danger":"alert-success")},a)}},{key:"render",value:function(){if(!this.props.customer)return k(h.default,null);var e=this.props.customer,t=e.firstname,n=e.lastname,a=e.email;return k(m.a,null,k(d.a,null,k("title",null,"Account")),k("div",{className:"account-container"},k("div",{className:"custom-container py-5 my-4 my-sm-5"},k("div",{className:"row mt-4"},k("div",{className:"col-12"},k("h2",{className:"font-size-header mb-4 pt-5 text-center"},"My account"),this.renderAlert())),k("div",{className:"row mt-5 pt-5"},k("div",{className:"col-12 col-md-8 col-lg-8"},k("div",{className:"d-flex flex-row justify-content-between"},k("h5",null,"Order history"),this.customerSince()),this.renderOrdersTable()),k("div",{className:"col-12 col-md-4 col-lg-4 row-content"},k("div",{className:"card p-2 mt-6"},k("h5",{className:"mb-2"},t," ",n),k("a",{href:"mailto:".concat(a),target:"_blank",rel:"noopener noreferrer",className:"mb-2"},a),k("h6",null,"Shipping address"),this.renderShippingAddress()))))),k(f.a,null))}}]),n}(c.Component);t.default=Object(_.withRouter)(Object(N.b)((function(e){return{customer:e.customer}}))(S))},owYu:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account",function(){return n("5xsU")}])}},[["owYu",2,1,4,7,0,3,5,8]]]);